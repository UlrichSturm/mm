# Epic 20: Wills Management

**Phase:** Phase 2  
**Portal:** Backend  
**Module:** WillsModule  
**Epic ID:** E-020

---

## Описание

Система управления завещаниями. Включает создание заявок на завещания, назначение адвокатов и управление статусами завещаний.

---

## Функциональность

- Создание заявок на завещания
- Назначение адвокатов/нотариусов
- Статусы завещаний
- Управление данными завещаний
- Уведомления о смерти клиента
- Интеграция с LawyerNotaryModule

**Исключено из Phase 2:**
- Автоматическое оформление завещаний
- Шаблоны завещаний
- Электронная подпись

---

## Зависимости

**Предшествующие эпики:**
- ✅ Epic 1: Backend Authentication (MUST)
- ✅ Epic 21: Lawyer/Notary Management (MUST)

**Требует завершения:**
- Epic 1 должен быть завершен (Auth)
- Epic 21 должен быть завершен (Lawyers для назначения)

**Блокирует:**
- Epic 25: Client App - Wills
- Epic 31: Admin Portal - Wills Management

---

## Приоритет (MoSCoW)

**Should Have** - Важный для Phase 2

Завещания - это уникальная функция платформы, но не критична для базовой работы.

---

## Story Points

**Оценка:** 13 points

**Обоснование:**
- Создание заявок: 3 points
- Назначение адвокатов: 3 points
- Статусы завещаний: 2 points
- Управление данными: 3 points
- Уведомления: 2 points

---

## Последовательность разработки

**Порядок:** 20 (после Epic 21)

**Последовательность:**
1. Создание WillsModule
2. Модель Will (Prisma)
3. Создание заявок
4. Назначение адвокатов
5. Статусы завещаний
6. Уведомления
7. Интеграция с LawyerNotaryModule

---

## Параллельная разработка

**Возможна параллельная работа:**
- ✅ Frontend команда может начать работу над UI после определения API
- ✅ Может разрабатываться параллельно с Epic 22 (Geolocation)

**Не может быть параллельной:**
- ❌ Нужна интеграция с Epic 21 (Lawyers)

---

## Критерии готовности (Definition of Done)

- [ ] Создание заявок работает
- [ ] Назначение адвокатов работает
- [ ] Статусы завещаний работают
- [ ] Уведомления отправляются
- [ ] Интеграция с Lawyers работает
- [ ] Unit тесты написаны (покрытие > 80%)
- [ ] API документация обновлена
- [ ] Code review пройден

---

## User Stories (примеры)

1. **Как Client**, я хочу создать заявку на завещание, чтобы оформить его
2. **Как система**, я должна назначить адвоката для завещания
3. **Как Lawyer**, я хочу видеть заявки на завещания, чтобы их обработать

---

## Технические детали

**API Endpoints:**
- `POST /wills` - Создание заявки (Client)
- `GET /wills` - Список завещаний
- `GET /wills/:id` - Детали завещания
- `PATCH /wills/:id/assign` - Назначение адвоката
- `PATCH /wills/:id/status` - Обновление статуса

**Database:**
- Will model (Prisma)
- WillStatus enum (PENDING, ASSIGNED, IN_PROGRESS, COMPLETED)

---

## Примечания

Важный эпик для Phase 2. Это уникальная функция платформы.

