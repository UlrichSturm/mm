# Epic 23: Reviews & Ratings

**Phase:** Phase 2  
**Portal:** Backend  
**Module:** ReviewsModule  
**Epic ID:** E-023

---

## Описание

Система отзывов и рейтингов для платформы. Включает создание отзывов, модерацию и расчет рейтингов поставщиков.

---

## Функциональность

- Создание отзывов (Client после заказа)
- Модерация отзывов (Admin)
- Рейтинги поставщиков
- Рейтинги услуг
- Расчет средних рейтингов
- Фильтрация отзывов

**Исключено из Phase 2:**
- Ответы на отзывы (Vendor)
- Фото в отзывах
- Полезность отзывов (upvote/downvote)

---

## Зависимости

**Предшествующие эпики:**
- ✅ Epic 5: Backend Orders (MUST)
- ✅ Epic 2: Backend Vendors Management (MUST)

**Требует завершения:**
- Epic 5 должен быть завершен (Orders для связи)
- Epic 2 должен быть завершен (Vendors для рейтингов)

**Блокирует:**
- Epic 27: Client App - Reviews
- Epic 29: Vendor Portal - Reviews

---

## Приоритет (MoSCoW)

**Should Have** - Важный для Phase 2

Отзывы улучшают доверие к платформе, но не критичны для базовой работы.

---

## Story Points

**Оценка:** 8 points

**Обоснование:**
- Создание отзывов: 2 points
- Модерация: 2 points
- Рейтинги: 2 points
- Расчет средних: 1 point
- Интеграция: 1 point

---

## Последовательность разработки

**Порядок:** 23 (после Epic 5, 2)

**Последовательность:**
1. Создание ReviewsModule
2. Модель Review (Prisma)
3. Создание отзывов
4. Модерация отзывов
5. Расчет рейтингов
6. Интеграция с Orders и Vendors

---

## Параллельная разработка

**Возможна параллельная работа:**
- ✅ Может разрабатываться параллельно с Epic 22 (Geolocation)
- ✅ Frontend может работать над UI параллельно

**Не может быть параллельной:**
- ❌ Нужна интеграция с Epic 5, 2

---

## Критерии готовности (Definition of Done)

- [ ] Создание отзывов работает
- [ ] Модерация отзывов работает
- [ ] Рейтинги рассчитываются
- [ ] Интеграция с Orders и Vendors работает
- [ ] Unit тесты написаны (покрытие > 80%)
- [ ] API документация обновлена
- [ ] Code review пройден

---

## User Stories (примеры)

1. **Как Client**, я хочу оставить отзыв после заказа, чтобы помочь другим
2. **Как Client**, я хочу видеть рейтинги поставщиков, чтобы выбрать лучшего
3. **Как Admin**, я хочу модерировать отзывы, чтобы контролировать качество

---

## Технические детали

**API Endpoints:**
- `POST /reviews` - Создание отзыва (Client)
- `GET /reviews` - Список отзывов
- `GET /reviews/vendor/:id` - Отзывы поставщика
- `PATCH /reviews/:id/status` - Модерация (Admin)

**Database:**
- Review model (Prisma)
- Rating (1-5 stars)
- Связь с Order и Vendor

---

## Примечания

Важный эпик для Phase 2. Отзывы критичны для доверия к платформе.

