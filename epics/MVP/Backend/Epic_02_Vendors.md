# Epic 2: Vendors Management (MVP)

**Phase:** MVP  
**Portal:** Backend  
**Module:** VendorsModule  
**Epic ID:** E-002

---

## Описание

Управление поставщиками услуг на платформе. Включает CRUD операции для поставщиков, систему модерации (PENDING → APPROVED/REJECTED) и управление профилями поставщиков.

---

## Функциональность

- Создание профилей поставщиков
- CRUD операции для поставщиков
- Модерация поставщиков (PENDING → APPROVED/REJECTED)
- Просмотр профилей поставщиков
- Управление статусами поставщиков
- Email уведомления при изменении статуса

**Исключено из MVP:**
- Сложная валидация документов
- Множественные лицензии
- История изменений статусов

---

## Зависимости

**Предшествующие эпики:**
- ✅ Epic 1: Authentication & Authorization (MUST)

**Требует завершения:**
- Epic 1 должен быть завершен (Auth система)

**Блокирует:**
- Epic 3: Services Catalog (поставщики должны быть APPROVED)
- Epic 13: Vendor Portal - Authentication
- Epic 14: Vendor Portal - Services Management

---

## Приоритет (MoSCoW)

**Must Have** - Критичный для MVP

Поставщики - ключевая часть платформы. Без них нет услуг для клиентов.

---

## Story Points

**Оценка:** 8 points

**Обоснование:**
- CRUD операции: 2 points
- Модерация workflow: 2 points
- Профили поставщиков: 2 points
- Email уведомления: 1 point
- Валидация: 1 point

---

## Последовательность разработки

**Порядок:** 2 (после Epic 1)

**Последовательность:**
1. Создание VendorsModule
2. CRUD операции
3. Модерация workflow
4. Профили поставщиков
5. Email уведомления
6. Интеграция с AuthModule

---

## Параллельная разработка

**Возможна параллельная работа:**
- ✅ Frontend команда может начать работу над Vendor Portal UI после определения API
- ✅ Можно работать параллельно над Email уведомлениями

**Не может быть параллельной:**
- ❌ Epic 3 (Services) не может начаться без этого эпика
- ❌ Frontend не может интегрироваться без готового API

---

## Критерии готовности (Definition of Done)

- [ ] CRUD операции работают
- [ ] Модерация workflow работает (PENDING → APPROVED/REJECTED)
- [ ] Профили поставщиков создаются и обновляются
- [ ] Email уведомления отправляются при изменении статуса
- [ ] Валидация данных работает
- [ ] Unit тесты написаны (покрытие > 80%)
- [ ] API документация обновлена
- [ ] Code review пройден

---

## User Stories (примеры)

1. **Как Admin**, я хочу модерировать поставщиков, чтобы контролировать качество платформы
2. **Как Vendor**, я хочу создать свой профиль, чтобы размещать услуги
3. **Как система**, я должна отправлять email уведомления при изменении статуса поставщика
4. **Как Client**, я хочу видеть только одобренных поставщиков

---

## Технические детали

**Технологии:**
- NestJS
- Prisma ORM
- EmailModule (для уведомлений)

**API Endpoints:**
- `POST /vendors` - Создание поставщика (Admin)
- `GET /vendors` - Список поставщиков (Admin)
- `GET /vendors/me` - Свой профиль (Vendor)
- `GET /vendors/:id` - Профиль поставщика
- `PATCH /vendors/:id` - Обновление профиля
- `PATCH /vendors/:id/status` - Изменение статуса (Admin)
- `DELETE /vendors/:id` - Удаление поставщика (Admin)

**Database:**
- VendorProfile model (Prisma)
- VendorStatus enum (PENDING, APPROVED, REJECTED)

---

## Риски и митигация

**Риски:**
- Сложность модерации workflow
- Интеграция с EmailModule

**Митигация:**
- Простой workflow на старте
- Использование готового EmailModule

---

## Примечания

Критичный эпик для MVP. Поставщики должны быть одобрены перед созданием услуг.

