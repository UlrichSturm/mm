# Epic 8: Email Notifications (MVP)

**Phase:** MVP  
**Portal:** Backend  
**Module:** EmailModule  
**Epic ID:** E-008

---

## Описание

Базовая система email уведомлений для платформы. Включает отправку email через Mailgun/SMTP и базовые шаблоны уведомлений.

---

## Функциональность

- Интеграция с Mailgun/SMTP
- Отправка email уведомлений
- Базовые шаблоны email
- Уведомления о регистрации
- Уведомления о статусах заказов
- Уведомления о модерации

**Исключено из MVP:**
- Продвинутые шаблоны
- Персонализация
- Email preferences
- Unsubscribe функциональность

---

## Зависимости

**Предшествующие эпики:**
- ✅ Epic 1: Authentication & Authorization (MUST)
- ✅ Epic 2: Vendors Management (MUST)
- ✅ Epic 5: Orders (MUST)

**Требует завершения:**
- Epic 1 должен быть завершен (для уведомлений о регистрации)
- Epic 2 должен быть завершен (для уведомлений о модерации)
- Epic 5 должен быть завершен (для уведомлений о заказах)

**Блокирует:**
- Нет критичных блокировок (может быть добавлено позже)

---

## Приоритет (MoSCoW)

**Could Have** - Желательно для MVP

Email уведомления улучшают UX, но платформа может работать и без них на старте.

---

## Story Points

**Оценка:** 5 points

**Обоснование:**
- Интеграция с Mailgun: 2 points
- Базовые шаблоны: 2 points
- Интеграция с модулями: 1 point

---

## Последовательность разработки

**Порядок:** 8 (может быть параллельно с другими)

**Последовательность:**
1. Настройка Mailgun/SMTP
2. Создание EmailModule
3. Базовые шаблоны
4. Интеграция с модулями
5. Тестирование отправки

---

## Параллельная разработка

**Возможна параллельная работа:**
- ✅ Может разрабатываться параллельно с другими эпиками
- ✅ Шаблоны могут создаваться отдельно

**Не может быть параллельной:**
- ❌ Нужна интеграция с другими модулями (но может быть добавлена позже)

---

## Критерии готовности (Definition of Done)

- [ ] Интеграция с Mailgun работает
- [ ] Email отправляются
- [ ] Базовые шаблоны работают
- [ ] Уведомления о регистрации работают
- [ ] Уведомления о заказах работают
- [ ] Уведомления о модерации работают
- [ ] Unit тесты написаны (покрытие > 80%)
- [ ] API документация обновлена
- [ ] Code review пройден

---

## User Stories (примеры)

1. **Как пользователь**, я хочу получать email уведомления о статусе моего заказа
2. **Как Vendor**, я хочу получать email уведомления о модерации моего профиля
3. **Как система**, я должна отправлять email уведомления при важных событиях

---

## Технические детали

**Технологии:**
- NestJS
- Mailgun SDK или nodemailer
- Email шаблоны (HTML)

**API Endpoints:**
- Внутренний модуль (не публичный API)
- Используется другими модулями

**Email Templates:**
- Registration confirmation
- Order status updates
- Vendor moderation notifications

---

## Риски и митигация

**Риски:**
- Доставка email (spam)
- Стоимость email сервиса

**Митигация:**
- Использование проверенного сервиса (Mailgun)
- Правильная настройка SPF/DKIM
- Мониторинг доставки

---

## Примечания

Может быть добавлено позже, если нужно ускорить MVP. Но рекомендуется включить для лучшего UX.

