(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{2869:function(e,t,s){Promise.resolve().then(s.bind(s,3962))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},3962:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(7437),r=s(2265),n=s(9376),l=s(707),o=s(757),i=s(1171),c=s(2827),u=s(8023),d=s(7951),h=s(7648),m=s(1978);function f(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=e.id,{error:f,handleError:x,clearError:p}=(0,d.U)(),[g,y]=(0,r.useState)(!0),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)({});(0,r.useEffect)(()=>{s&&w()},[s]);let w=async()=>{try{y(!0),p();let e=await l.q.getOne(s);N({licenseNumber:e.licenseNumber,licenseType:e.licenseType,organization:e.organization,specialization:e.specialization,yearsOfExperience:e.yearsOfExperience,officePostalCode:e.officePostalCode,officeAddress:e.officeAddress,phone:e.phone})}catch(e){x(e)}finally{y(!1)}},k=async e=>{e.preventDefault();try{v(!0),p(),await l.q.update(s,j),t.push("/lawyer-notary/".concat(s))}catch(e){x(e)}finally{v(!1)}};return g?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Загрузка..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(h.default,{href:"/lawyer-notary/".concat(s),children:(0,a.jsx)(i.z,{variant:"ghost",size:"icon",children:(0,a.jsx)(m.Z,{className:"w-4 h-4"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Редактировать профиль"})]}),f&&(0,a.jsx)(u.X,{error:f,onDismiss:p,onRetry:w,showRetry:!0}),(0,a.jsx)(o.Zb,{children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер лицензии *"}),(0,a.jsx)(c.I,{required:!0,value:j.licenseNumber||"",onChange:e=>N({...j,licenseNumber:e.target.value}),placeholder:"Номер лицензии"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип лицензии *"}),(0,a.jsxs)("select",{required:!0,value:j.licenseType||"LAWYER",onChange:e=>N({...j,licenseType:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"LAWYER",children:"Адвокат"}),(0,a.jsx)("option",{value:"NOTARY",children:"Нотариус"}),(0,a.jsx)("option",{value:"BOTH",children:"Оба"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Организация"}),(0,a.jsx)(c.I,{value:j.organization||"",onChange:e=>N({...j,organization:e.target.value}),placeholder:"Название организации"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Специализация"}),(0,a.jsx)(c.I,{value:j.specialization||"",onChange:e=>N({...j,specialization:e.target.value}),placeholder:"Специализация"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Годы опыта"}),(0,a.jsx)(c.I,{type:"number",value:j.yearsOfExperience||"",onChange:e=>N({...j,yearsOfExperience:e.target.value?parseInt(e.target.value):void 0}),placeholder:"Годы опыта"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Почтовый индекс офиса *"}),(0,a.jsx)(c.I,{required:!0,value:j.officePostalCode||"",onChange:e=>N({...j,officePostalCode:e.target.value}),placeholder:"Почтовый индекс"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Полный адрес офиса *"}),(0,a.jsx)(c.I,{required:!0,value:j.officeAddress||"",onChange:e=>N({...j,officeAddress:e.target.value}),placeholder:"Полный адрес офиса"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон"}),(0,a.jsx)(c.I,{value:j.phone||"",onChange:e=>N({...j,phone:e.target.value}),placeholder:"Телефон"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(i.z,{type:"submit",disabled:b,children:b?"Сохранение...":"Сохранить изменения"}),(0,a.jsx)(h.default,{href:"/lawyer-notary/".concat(s),children:(0,a.jsx)(i.z,{type:"button",variant:"outline",children:"Отмена"})})]})]})})})]})}},8023:function(e,t,s){"use strict";s.d(t,{X:function(){return h}});var a=s(7437),r=s(2265),n=s(7816),l=s(6241);let o=(0,l.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),i=(0,l.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var c=s(1171),u=s(3448);let d={error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600"}};function h(e){let{error:t,onDismiss:s,onRetry:l,className:h,variant:m="error",autoDismiss:f,showRetry:x=!1}=e,[p,g]=(0,r.useState)(!!t);if((0,r.useEffect)(()=>{g(!!t)},[t]),(0,r.useEffect)(()=>{if(f&&t&&p){let e=setTimeout(()=>{g(!1),null==s||s()},1e3*f);return()=>clearTimeout(e)}},[t,f,p,s]),!t||!p)return null;let y=t instanceof Error?t.message:t,b=d[m];return(0,a.jsx)("div",{className:(0,u.cn)("relative rounded-md border p-4 animate-in slide-in-from-top-2",b.bg,b.border,h),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(n.Z,{className:(0,u.cn)("h-5 w-5 flex-shrink-0 mt-0.5",b.icon)}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:(0,u.cn)("text-sm font-medium",b.text),children:"error"===m?"Error":"warning"===m?"Warning":"Information"}),(0,a.jsx)("p",{className:(0,u.cn)("mt-1 text-sm",b.text.replace("800","700")),children:y}),x&&l&&(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:l,className:"mt-3",children:[(0,a.jsx)(o,{className:"w-3 h-3 mr-2"}),"Retry"]})]}),(0,a.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[l&&!x&&(0,a.jsx)("button",{onClick:l,className:(0,u.cn)("flex-shrink-0 hover:opacity-80",b.icon),title:"Retry",children:(0,a.jsx)(o,{className:"h-4 w-4"})}),s&&(0,a.jsx)("button",{onClick:()=>{g(!1),s()},className:(0,u.cn)("flex-shrink-0 hover:opacity-80",b.icon),title:"Close",children:(0,a.jsx)(i,{className:"h-4 w-4"})})]})]})})}},2827:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var a=s(7437),r=s(2265),n=s(3448);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},7951:function(e,t,s){"use strict";s.d(t,{U:function(){return r}});var a=s(2265);function r(){let[e,t]=(0,a.useState)(null),s=(0,a.useCallback)(()=>{t(null)},[]),r=(0,a.useCallback)(e=>{t(function(e){let t=function(e){if(e instanceof Error){let t=e.message,s=t.match(/status:\s*(\d+)/i);return{message:t,status:s?parseInt(s[1]):void 0}}return"string"==typeof e?{message:e}:e&&"object"==typeof e?{message:e.message||e.error||"An unknown error occurred",status:e.status||e.statusCode,code:e.code,details:e.details}:{message:"An unknown error occurred"}}(e);return 401===t.status?"Authorization required. Please log in.":403===t.status?"You do not have permission to perform this action.":404===t.status?"Requested resource not found.":500===t.status?"Server error. Please try again later.":503===t.status?"Service temporarily unavailable. Please try again later.":t.message.includes("Failed to fetch")||t.message.includes("NetworkError")?"Connection error. Please ensure the backend server is running on http://localhost:3001":t.message}(e))},[]);return{error:e,setError:t,clearError:s,handleError:r}}},707:function(e,t,s){"use strict";s.d(t,{q:function(){return n}});var a=s(1875);class r{async request(e,t){return(0,a.N)(e,t)}async getAll(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.licenseType)&&t.append("licenseType",e.licenseType),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.postalCode)&&t.append("postalCode",e.postalCode);let s=t.toString();return this.request("/lawyer-notary".concat(s?"?".concat(s):""))}async getOne(e){return this.request("/lawyer-notary/".concat(e))}async create(e){return this.request("/lawyer-notary",{method:"POST",body:JSON.stringify(e)})}async update(e,t){return this.request("/lawyer-notary/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async updateStatus(e,t,s){return this.request("/lawyer-notary/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t,comment:s})})}async delete(e){return this.request("/lawyer-notary/".concat(e),{method:"DELETE"})}}let n=new r},1875:function(e,t,s){"use strict";s.d(t,{N:function(){return r}});var a=s(5020);async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat("http://localhost:3001","/api").concat(e),r=(0,a.LP)()||localStorage.getItem("authToken")||localStorage.getItem("auth_token")||null,n=new Headers(t.headers);n.set("Content-Type","application/json"),r&&n.set("Authorization","Bearer ".concat(r));let l=await fetch(s,{...t,headers:n});if(!l.ok){let e;if(401===l.status)throw window.location.pathname.includes("/auth/login")||(localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Error("Session expired. Please log in again.");try{e=await l.json()}catch(t){e={message:"HTTP ".concat(l.status,": ").concat(l.statusText)}}throw Error(e.message||"Request failed with status ".concat(l.status))}return l.json()}},1978:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},function(e){e.O(0,[442,648,920,971,117,744],function(){return e(e.s=2869)}),_N_E=e.O()}]);