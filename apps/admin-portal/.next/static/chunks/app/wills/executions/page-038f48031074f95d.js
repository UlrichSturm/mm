(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{8959:function(e,t,s){Promise.resolve().then(s.bind(s,4470))},4470:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),n=s(2265),r=s(1658),l=s(757),i=s(1171),c=s(8023),o=s(7951),d=s(4610),u=s(362);let m=(0,s(6241).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),h={PENDING:"Pending",EXECUTING:"Executing",EXECUTED:"Executed",CANCELLED:"Cancelled"};function x(){let{error:e,handleError:t,clearError:s}=(0,o.U)(),[x,p]=(0,n.useState)([]),[f,y]=(0,n.useState)(!0),[g,v]=(0,n.useState)({});(0,n.useEffect)(()=>{j()},[g]);let j=async()=>{try{y(!0),s();let e=await r.M.getAllExecutions(g);p(e)}catch(e){t(e)}finally{y(!1)}},N=e=>{v(t=>({...t,status:e}))};return f?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Загрузка..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Исполнение завещаний"})}),e&&(0,a.jsx)(c.X,{error:e,onDismiss:s,onRetry:j,showRetry:!0}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)(i.z,{variant:g.status?"outline":"default",size:"sm",onClick:()=>N(void 0),children:"Все статусы"}),(0,a.jsx)(i.z,{variant:"PENDING"===g.status?"default":"outline",size:"sm",onClick:()=>N("PENDING"),children:"Pending"}),(0,a.jsx)(i.z,{variant:"EXECUTING"===g.status?"default":"outline",size:"sm",onClick:()=>N("EXECUTING"),children:"Executing"}),(0,a.jsx)(i.z,{variant:"EXECUTED"===g.status?"default":"outline",size:"sm",onClick:()=>N("EXECUTED"),children:"Executed"}),(0,a.jsx)(i.z,{variant:"CANCELLED"===g.status?"default":"outline",size:"sm",onClick:()=>N("CANCELLED"),children:"Cancelled"})]})})}),(0,a.jsx)("div",{className:"grid gap-4",children:0===x.length?(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-12 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Исполняемые завещания не найдены"})})}):x.map(e=>(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Исполнение #",e.id.slice(0,8)]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-purple-100 text-purple-800 border-purple-200",children:h[e.status]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Клиент ID:"})," ",e.clientId.slice(0,8)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Дата смерти:"})," ",new Date(e.deathDate).toLocaleDateString("ru-RU")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Notified by:"})," ","LAWYER"===e.notifiedBy?"Lawyer":"Relatives"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Статус похорон:"})," ",e.funeralStatus]}),e.paymentMethod&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Способ оплаты:"})," ",e.paymentMethod]})]}),e.paymentStatus&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Статус оплаты:"})," ",e.paymentStatus]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Создано:"})," ",new Date(e.createdAt).toLocaleString("ru-RU")]})]})]})})})},e.id))})]})}},8023:function(e,t,s){"use strict";s.d(t,{X:function(){return m}});var a=s(7437),n=s(2265),r=s(7816),l=s(6241);let i=(0,l.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),c=(0,l.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=s(1171),d=s(3448);let u={error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600"}};function m(e){let{error:t,onDismiss:s,onRetry:l,className:m,variant:h="error",autoDismiss:x,showRetry:p=!1}=e,[f,y]=(0,n.useState)(!!t);if((0,n.useEffect)(()=>{y(!!t)},[t]),(0,n.useEffect)(()=>{if(x&&t&&f){let e=setTimeout(()=>{y(!1),null==s||s()},1e3*x);return()=>clearTimeout(e)}},[t,x,f,s]),!t||!f)return null;let g=t instanceof Error?t.message:t,v=u[h];return(0,a.jsx)("div",{className:(0,d.cn)("relative rounded-md border p-4 animate-in slide-in-from-top-2",v.bg,v.border,m),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(r.Z,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",v.icon)}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:(0,d.cn)("text-sm font-medium",v.text),children:"error"===h?"Error":"warning"===h?"Warning":"Information"}),(0,a.jsx)("p",{className:(0,d.cn)("mt-1 text-sm",v.text.replace("800","700")),children:g}),p&&l&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:l,className:"mt-3",children:[(0,a.jsx)(i,{className:"w-3 h-3 mr-2"}),"Retry"]})]}),(0,a.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[l&&!p&&(0,a.jsx)("button",{onClick:l,className:(0,d.cn)("flex-shrink-0 hover:opacity-80",v.icon),title:"Retry",children:(0,a.jsx)(i,{className:"h-4 w-4"})}),s&&(0,a.jsx)("button",{onClick:()=>{y(!1),s()},className:(0,d.cn)("flex-shrink-0 hover:opacity-80",v.icon),title:"Close",children:(0,a.jsx)(c,{className:"h-4 w-4"})})]})]})})}},7951:function(e,t,s){"use strict";s.d(t,{U:function(){return n}});var a=s(2265);function n(){let[e,t]=(0,a.useState)(null),s=(0,a.useCallback)(()=>{t(null)},[]),n=(0,a.useCallback)(e=>{t(function(e){let t=function(e){if(e instanceof Error){let t=e.message,s=t.match(/status:\s*(\d+)/i);return{message:t,status:s?parseInt(s[1]):void 0}}return"string"==typeof e?{message:e}:e&&"object"==typeof e?{message:e.message||e.error||"An unknown error occurred",status:e.status||e.statusCode,code:e.code,details:e.details}:{message:"An unknown error occurred"}}(e);return 401===t.status?"Authorization required. Please log in.":403===t.status?"You do not have permission to perform this action.":404===t.status?"Requested resource not found.":500===t.status?"Server error. Please try again later.":503===t.status?"Service temporarily unavailable. Please try again later.":t.message.includes("Failed to fetch")||t.message.includes("NetworkError")?"Connection error. Please ensure the backend server is running on http://localhost:3001":t.message}(e))},[]);return{error:e,setError:t,clearError:s,handleError:n}}},1875:function(e,t,s){"use strict";s.d(t,{N:function(){return n}});var a=s(5020);async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat("http://localhost:3001","/api").concat(e),n=(0,a.LP)()||localStorage.getItem("authToken")||localStorage.getItem("auth_token")||null,r=new Headers(t.headers);r.set("Content-Type","application/json"),n&&r.set("Authorization","Bearer ".concat(n));let l=await fetch(s,{...t,headers:r});if(!l.ok){let e;if(401===l.status)throw window.location.pathname.includes("/auth/login")||(localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Error("Session expired. Please log in again.");try{e=await l.json()}catch(t){e={message:"HTTP ".concat(l.status,": ").concat(l.statusText)}}throw Error(e.message||"Request failed with status ".concat(l.status))}return l.json()}},1658:function(e,t,s){"use strict";s.d(t,{M:function(){return r}});var a=s(1875);class n{async request(e,t){return(0,a.N)(e,t)}async getAllAppointments(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.lawyerNotaryId)&&t.append("lawyerNotaryId",e.lawyerNotaryId),(null==e?void 0:e.dateFrom)&&t.append("dateFrom",e.dateFrom),(null==e?void 0:e.dateTo)&&t.append("dateTo",e.dateTo),(null==e?void 0:e.search)&&t.append("search",e.search);let s=t.toString();return this.request("/wills/appointments".concat(s?"?".concat(s):""))}async getAppointment(e){return this.request("/wills/appointments/".concat(e))}async getWillData(e){return this.request("/wills/data/".concat(e))}async getAllExecutions(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.dateFrom)&&t.append("dateFrom",e.dateFrom),(null==e?void 0:e.dateTo)&&t.append("dateTo",e.dateTo);let s=t.toString();return this.request("/wills/executions".concat(s?"?".concat(s):""))}async getExecution(e){return this.request("/wills/executions/".concat(e))}}let r=new n},362:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},4610:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[442,920,971,117,744],function(){return e(e.s=8959)}),_N_E=e.O()}]);