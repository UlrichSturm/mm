(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{4052:function(e,t,s){Promise.resolve().then(s.bind(s,7069))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},7069:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),n=s(2265),r=s(9376),l=s(1658),i=s(757),c=s(1171),o=s(8023),d=s(7951),m=s(7648),u=s(1978),h=s(4610),x=s(7787),p=s(7797),f=s(362),g=s(2508),y=s(2095);function j(){let e=(0,r.useParams)().id,{error:t,handleError:s,clearError:j}=(0,d.U)(),[N,v]=(0,n.useState)(null),[w,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{e&&k()},[e]);let k=async()=>{try{b(!0),j();let t=await l.M.getWillData(e);v(t)}catch(e){s(e)}finally{b(!1)}},Z=(e,t)=>{window.open(e,"_blank")};return w?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Загрузка..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[t&&(0,a.jsx)(o.X,{error:t,onDismiss:j,onRetry:k,showRetry:!0}),!N&&!t&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Данные завещания не найдены"}),(0,a.jsx)(m.default,{href:"/wills/appointments",children:(0,a.jsx)(c.z,{className:"mt-4",children:"Вернуться к заявкам"})})]}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(m.default,{href:"/wills/appointments",children:(0,a.jsx)(c.z,{variant:"ghost",size:"icon",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Данные завещания"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Данные клиента"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[N.clientData.firstName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Имя:"}),(0,a.jsx)("p",{className:"text-gray-900",children:N.clientData.firstName})]}),N.clientData.lastName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Фамилия:"}),(0,a.jsx)("p",{className:"text-gray-900",children:N.clientData.lastName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),(0,a.jsx)("p",{className:"text-gray-900",children:N.clientData.email})]})]}),N.clientData.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Телефон:"}),(0,a.jsx)("p",{className:"text-gray-900",children:N.clientData.phone})]})]}),N.clientData.dateOfBirth&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Дата рождения:"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(N.clientData.dateOfBirth).toLocaleDateString("ru-RU")})]})]})]})]})}),N.relativesContacts&&N.relativesContacts.length>0&&(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Контакты родственников"}),(0,a.jsx)("div",{className:"space-y-4",children:N.relativesContacts.map((e,t)=>(0,a.jsxs)("div",{className:"border-b pb-3 last:border-0",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.relationship}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-3 h-3"}),e.phone]}),e.email&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3"}),e.email]})]})]},t))})]})}),N.heirs&&N.heirs.length>0&&(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Наследники"}),(0,a.jsx)("div",{className:"space-y-3",children:N.heirs.map((e,t)=>(0,a.jsxs)("div",{className:"border-b pb-3 last:border-0",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.relationship}),e.share&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Доля: ",e.share]})]},t))})]})}),N.additionalInfo&&(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Дополнительная информация"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:N.additionalInfo})]})}),N.documents&&N.documents.length>0&&(0,a.jsx)(i.Zb,{className:"lg:col-span-2",children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5"}),"Загруженные документы"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.documents.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Загружено: ",new Date(e.uploadedAt).toLocaleDateString("ru-RU")]})]})]}),(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>Z(e.url,e.name),children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Скачать"]})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsxs)("p",{children:["Создано: ",new Date(N.createdAt).toLocaleString("ru-RU")]}),N.updatedAt!==N.createdAt&&(0,a.jsxs)("p",{children:["Обновлено: ",new Date(N.updatedAt).toLocaleString("ru-RU")]})]})]})]})}},8023:function(e,t,s){"use strict";s.d(t,{X:function(){return u}});var a=s(7437),n=s(2265),r=s(7816),l=s(6241);let i=(0,l.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),c=(0,l.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=s(1171),d=s(3448);let m={error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600"}};function u(e){let{error:t,onDismiss:s,onRetry:l,className:u,variant:h="error",autoDismiss:x,showRetry:p=!1}=e,[f,g]=(0,n.useState)(!!t);if((0,n.useEffect)(()=>{g(!!t)},[t]),(0,n.useEffect)(()=>{if(x&&t&&f){let e=setTimeout(()=>{g(!1),null==s||s()},1e3*x);return()=>clearTimeout(e)}},[t,x,f,s]),!t||!f)return null;let y=t instanceof Error?t.message:t,j=m[h];return(0,a.jsx)("div",{className:(0,d.cn)("relative rounded-md border p-4 animate-in slide-in-from-top-2",j.bg,j.border,u),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(r.Z,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",j.icon)}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:(0,d.cn)("text-sm font-medium",j.text),children:"error"===h?"Error":"warning"===h?"Warning":"Information"}),(0,a.jsx)("p",{className:(0,d.cn)("mt-1 text-sm",j.text.replace("800","700")),children:y}),p&&l&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:l,className:"mt-3",children:[(0,a.jsx)(i,{className:"w-3 h-3 mr-2"}),"Retry"]})]}),(0,a.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[l&&!p&&(0,a.jsx)("button",{onClick:l,className:(0,d.cn)("flex-shrink-0 hover:opacity-80",j.icon),title:"Retry",children:(0,a.jsx)(i,{className:"h-4 w-4"})}),s&&(0,a.jsx)("button",{onClick:()=>{g(!1),s()},className:(0,d.cn)("flex-shrink-0 hover:opacity-80",j.icon),title:"Close",children:(0,a.jsx)(c,{className:"h-4 w-4"})})]})]})})}},7951:function(e,t,s){"use strict";s.d(t,{U:function(){return n}});var a=s(2265);function n(){let[e,t]=(0,a.useState)(null),s=(0,a.useCallback)(()=>{t(null)},[]),n=(0,a.useCallback)(e=>{t(function(e){let t=function(e){if(e instanceof Error){let t=e.message,s=t.match(/status:\s*(\d+)/i);return{message:t,status:s?parseInt(s[1]):void 0}}return"string"==typeof e?{message:e}:e&&"object"==typeof e?{message:e.message||e.error||"An unknown error occurred",status:e.status||e.statusCode,code:e.code,details:e.details}:{message:"An unknown error occurred"}}(e);return 401===t.status?"Authorization required. Please log in.":403===t.status?"You do not have permission to perform this action.":404===t.status?"Requested resource not found.":500===t.status?"Server error. Please try again later.":503===t.status?"Service temporarily unavailable. Please try again later.":t.message.includes("Failed to fetch")||t.message.includes("NetworkError")?"Connection error. Please ensure the backend server is running on http://localhost:3001":t.message}(e))},[]);return{error:e,setError:t,clearError:s,handleError:n}}},1875:function(e,t,s){"use strict";s.d(t,{N:function(){return n}});var a=s(5020);async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat("http://localhost:3001","/api").concat(e),n=(0,a.LP)()||localStorage.getItem("authToken")||localStorage.getItem("auth_token")||null,r=new Headers(t.headers);r.set("Content-Type","application/json"),n&&r.set("Authorization","Bearer ".concat(n));let l=await fetch(s,{...t,headers:r});if(!l.ok){let e;if(401===l.status)throw window.location.pathname.includes("/auth/login")||(localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Error("Session expired. Please log in again.");try{e=await l.json()}catch(t){e={message:"HTTP ".concat(l.status,": ").concat(l.statusText)}}throw Error(e.message||"Request failed with status ".concat(l.status))}return l.json()}},1658:function(e,t,s){"use strict";s.d(t,{M:function(){return r}});var a=s(1875);class n{async request(e,t){return(0,a.N)(e,t)}async getAllAppointments(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.lawyerNotaryId)&&t.append("lawyerNotaryId",e.lawyerNotaryId),(null==e?void 0:e.dateFrom)&&t.append("dateFrom",e.dateFrom),(null==e?void 0:e.dateTo)&&t.append("dateTo",e.dateTo),(null==e?void 0:e.search)&&t.append("search",e.search);let s=t.toString();return this.request("/wills/appointments".concat(s?"?".concat(s):""))}async getAppointment(e){return this.request("/wills/appointments/".concat(e))}async getWillData(e){return this.request("/wills/data/".concat(e))}async getAllExecutions(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.dateFrom)&&t.append("dateFrom",e.dateFrom),(null==e?void 0:e.dateTo)&&t.append("dateTo",e.dateTo);let s=t.toString();return this.request("/wills/executions".concat(s?"?".concat(s):""))}async getExecution(e){return this.request("/wills/executions/".concat(e))}}let r=new n},1978:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},362:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2095:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2508:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7787:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7797:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},4610:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6241).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[442,648,920,971,117,744],function(){return e(e.s=4052)}),_N_E=e.O()}]);