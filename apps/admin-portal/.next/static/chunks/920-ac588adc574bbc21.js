"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{1171:function(e,t,n){let r,o;n.d(t,{z:function(){return b}});var l=n(7437),a=n(2265),i=n.t(a,2);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var s=Symbol.for("react.lazy"),u=i[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var f=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:n,...r}=e;if(d(n)&&"function"==typeof u&&(n=u(n._payload)),a.isValidElement(n)){var o;let e,l;let i=(o=n,(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.props.ref:o.props.ref||o.ref),s=function(e,t){let n={...t};for(let r in t){let o=e[r],l=t[r];/^on[A-Z]/.test(r)?o&&l?n[r]=(...e)=>{let t=l(...e);return o(...e),t}:o&&(n[r]=o):"style"===r?n[r]={...o,...l}:"className"===r&&(n[r]=[o,l].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==a.Fragment&&(s.ref=t?function(...e){return t=>{let n=!1,r=e.map(e=>{let r=c(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():c(e[t],null)}}}}(t,i):i),a.cloneElement(n,s)}return a.Children.count(n)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=a.forwardRef((e,n)=>{let{children:r,...o}=e;d(r)&&"function"==typeof u&&(r=u(r._payload));let i=a.Children.toArray(r),c=i.find(m);if(c){let e=c.props.children,r=i.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...o,ref:n,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,l.jsx)(t,{...o,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}("Slot"),p=Symbol("radix.slottable");function m(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===p}var y=n(1994);let g=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,h=y.W;var v=n(3448);let k=(r="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",o={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==o?void 0:o.variants)==null)return h(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:n,defaultVariants:l}=o,a=Object.keys(n).map(t=>{let r=null==e?void 0:e[t],o=null==l?void 0:l[t];if(null===r)return null;let a=g(r)||g(o);return n[t][a]}),i=e&&Object.entries(e).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return h(r,a,null==o?void 0:null===(t=o.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:n,className:r,...o}=t;return Object.entries(o).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...l,...i}[t]):({...l,...i})[t]===n})?[...e,n,r]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),b=a.forwardRef((e,t)=>{let{className:n,variant:r,size:o,asChild:a=!1,...i}=e,c=a?f:"button";return(0,l.jsx)(c,{className:(0,v.cn)(k({variant:r,size:o,className:n})),ref:t,...i})});b.displayName="Button"},757:function(e,t,n){n.d(t,{Ol:function(){return c},Zb:function(){return a},aY:function(){return i},ll:function(){return s}});var r=n(7437),o=n(2265),l=n(3448);let a=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...o})});a.displayName="Card";let i=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",n),...o})});i.displayName="CardContent";let c=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",n),...o})});c.displayName="CardHeader";let s=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",n),...o})});s.displayName="CardTitle"},5020:function(e,t,n){n.d(t,{LP:function(){return f},Nn:function(){return s},UF:function(){return d},bG:function(){return p},tP:function(){return a}});var r=n(6063),o=n(257);let l={url:o.env.NEXT_PUBLIC_KEYCLOAK_URL||"http://localhost:8080",realm:o.env.NEXT_PUBLIC_KEYCLOAK_REALM||"memento-mori",clientId:o.env.NEXT_PUBLIC_KEYCLOAK_CLIENT_ID||"memento-mori-admin"},a=new r.Z(l),i=!1,c=!1;async function s(e,t){if(c)return a.authenticated||!1;if(i)return new Promise(e=>{let t=setInterval(()=>{i||(clearInterval(t),e(a.authenticated||!1))},100)});i=!0;try{let t=await a.init({onLoad:"check-sso",silentCheckSsoRedirectUri:window.location.origin+"/silent-check-sso.html",pkceMethod:"S256",checkLoginIframe:!1});return c=!0,i=!1,t&&(a.token&&localStorage.setItem("authToken",a.token),u(),null==e||e()),t}catch(e){return i=!1,c=!0,console.error("Keycloak initialization error:",e),null==t||t(e),!1}}function u(){a.onTokenExpired=()=>{a.updateToken(30).then(e=>{e&&a.token&&localStorage.setItem("authToken",a.token)}).catch(()=>{a.login({redirectUri:window.location.origin+"/"})})}}async function d(e,t){try{let n="".concat(l.url,"/realms/").concat(l.realm,"/protocol/openid-connect/token"),r=new URLSearchParams;r.append("grant_type","password"),r.append("client_id",l.clientId),r.append("username",e),r.append("password",t);let o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!o.ok){let e=await o.json().catch(()=>({})),t=e.error_description||e.error||"Invalid credentials",n=t;return t.includes("Invalid user credentials")?n="Invalid email or password":t.includes("Account is disabled")?n="Account is disabled":t.includes("Account is temporarily disabled")&&(n="Account is temporarily disabled due to too many failed login attempts"),{success:!1,error:n}}let i=await o.json();if(a.token=i.access_token,a.refreshToken=i.refresh_token,a.idToken=i.id_token,a.authenticated=!0,i.access_token)try{let e=i.access_token.split(".");if(3===e.length){let t=e[1].replace(/-/g,"+").replace(/_/g,"/"),n=t+"=".repeat((4-t.length%4)%4);a.tokenParsed=JSON.parse(atob(n))}}catch(e){console.error("Error parsing token:",e)}return a.token&&localStorage.setItem("authToken",a.token),u(),a.onAuthSuccess&&a.onAuthSuccess(),{success:!0}}catch(e){return console.error("Login error:",e),{success:!1,error:e instanceof Error?e.message:"Login failed. Please try again."}}}function f(){return a.token||localStorage.getItem("authToken")}function p(){var e;return a.tokenParsed?{id:a.tokenParsed.sub,email:a.tokenParsed.email||a.tokenParsed.preferred_username,firstName:a.tokenParsed.given_name,lastName:a.tokenParsed.family_name,roles:(null===(e=a.tokenParsed.realm_access)||void 0===e?void 0:e.roles)||[]}:null}},3448:function(e,t,n){n.d(t,{cn:function(){return l}});var r=n(1994),o=n(3335);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}},7816:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(6241).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}}]);