# üöÄ Phase 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-01  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ  
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1-2 –Ω–µ–¥–µ–ª–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É)

---

## üìã –û–±–∑–æ—Ä

Phase 0 –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –¥–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP**. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞, –±–µ–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞.

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–¥–∞—á

### 1. üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 1.1 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] **PRD (Product Requirements Document)** - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–¥—É–∫—Ç—É
- [ ] **Technical Architecture Document** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [ ] **API Design Document** - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API (OpenAPI/Swagger)
- [ ] **Database Schema Design** - –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] **Security Requirements** - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] **Integration Specifications** - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (Stripe, Email)

#### 1.2 –ü—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- [ ] **Development Guidelines** - –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] **Code Style Guide** - –°—Ç–∏–ª—å –∫–æ–¥–∞ (ESLint, Prettier –∫–æ–Ω—Ñ–∏–≥–∏)
- [ ] **Git Flow Document** - –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å Git
- [ ] **PR Review Checklist** - –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è code review
- [ ] **Definition of Done** - –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á

#### 1.3 –î–∏–∑–∞–π–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] **UI/UX Wireframes** - –ú–∞–∫–µ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- [ ] **Design System** - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å—Ç–∏–ª–∏
- [ ] **Brand Guidelines** - –ë—Ä–µ–Ω–¥–±—É–∫ (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã, –ª–æ–≥–æ—Ç–∏–ø—ã)
- [ ] **User Flows** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

---

### 2. ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### 2.1 –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ CI/CD
- [ ] **GitHub Repository Setup**
  - [ ] –°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å branch protection rules
  - [ ] –î–æ–±–∞–≤–∏—Ç—å CODEOWNERS
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å issue templates
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PR templates

- [ ] **CI/CD Pipeline (GitHub Actions)**
  - [ ] Lint & Format check
  - [ ] Unit tests
  - [ ] Build check
  - [ ] Security scan (Snyk/Dependabot)
  - [ ] Auto-deploy to staging

#### 2.2 Development Environment
- [ ] **Docker Setup**
  - [ ] docker-compose.yml –¥–ª—è local dev
  - [ ] Dockerfiles –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  - [ ] Hot reload –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

- [ ] **Local Development**
  - [ ] README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
  - [ ] .env.example —Ñ–∞–π–ª—ã
  - [ ] Seed scripts –¥–ª—è –ë–î
  - [ ] Mock data generators

#### 2.3 Shared Configurations
- [ ] **ESLint Configuration**
  - [ ] Backend (NestJS) config
  - [ ] Frontend (Next.js) config
  - [ ] Shared rules

- [ ] **Prettier Configuration**
  - [ ] .prettierrc
  - [ ] .prettierignore

- [ ] **TypeScript Configuration**
  - [ ] Strict mode
  - [ ] Path aliases
  - [ ] Shared types package

- [ ] **Husky & Lint-staged**
  - [ ] Pre-commit hooks
  - [ ] Commit message validation (Commitlint)

---

### 3. üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–µ–∫—Ä–µ—Ç—ã

#### 3.1 Secrets Management
- [ ] **Environment Variables**
  - [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  - [ ] –°–æ–∑–¥–∞—Ç—å .env.example
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Secrets
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Vercel/Railway secrets

- [ ] **API Keys & Credentials**
  - [ ] Stripe Test Keys
  - [ ] Mailgun/SendGrid API Key
  - [ ] JWT Secret generation
  - [ ] Database credentials

#### 3.2 Security Policies
- [ ] **CORS Configuration**
- [ ] **Rate Limiting Policy**
- [ ] **Authentication Flow**
- [ ] **Data Encryption Policy**

---

### 4. üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### 4.1 Database Setup
- [ ] **PostgreSQL Setup**
  - [ ] Docker container config
  - [ ] Production database (Supabase/Railway)
  - [ ] Backup strategy

- [ ] **Prisma Setup**
  - [ ] Initial schema
  - [ ] Migrations workflow
  - [ ] Seed scripts

#### 4.2 Schema Design
- [ ] **ERD (Entity Relationship Diagram)**
- [ ] **All models documented**
- [ ] **Indexes planned**
- [ ] **Relations validated**

---

### 5. üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã

#### 5.1 Development Tools
- [ ] **IDE Setup**
  - [ ] VSCode settings.json
  - [ ] Recommended extensions
  - [ ] Debug configurations

- [ ] **Testing Tools**
  - [ ] Jest configuration
  - [ ] Testing Library setup
  - [ ] E2E testing (Playwright/Cypress)

#### 5.2 External Services
- [ ] **Stripe Account**
  - [ ] Test mode setup
  - [ ] Webhook endpoints
  - [ ] Products/Prices setup

- [ ] **Email Service**
  - [ ] Mailgun/SendGrid account
  - [ ] Domain verification
  - [ ] Email templates

- [ ] **Hosting/Deployment**
  - [ ] Vercel (Frontend)
  - [ ] Railway/Render (Backend)
  - [ ] Domain setup

- [ ] **Monitoring & Logging**
  - [ ] Sentry setup (error tracking)
  - [ ] LogRocket/Datadog (optional)

---

### 6. üìä Project Management

#### 6.1 Task Management
- [ ] **Project Board Setup**
  - [ ] GitHub Projects / Jira / Linear
  - [ ] Columns: Backlog, Todo, In Progress, Review, Done
  - [ ] Labels setup

- [ ] **Sprint Planning**
  - [ ] Sprint 1 backlog –≥–æ—Ç–æ–≤
  - [ ] Story points –ø—Ä–∏—Å–≤–æ–µ–Ω—ã
  - [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

#### 6.2 Communication
- [ ] **Slack/Discord Channel**
- [ ] **Daily Standup Schedule**
- [ ] **Sprint Review/Retro Schedule**

---

### 7. üìù API Documentation

#### 7.1 OpenAPI/Swagger
- [ ] **Swagger Setup in NestJS**
  - [ ] @nestjs/swagger installed
  - [ ] Global config
  - [ ] Auth decorators

- [ ] **API Endpoints Documented**
  - [ ] Auth endpoints
  - [ ] Vendors endpoints
  - [ ] Services endpoints
  - [ ] Orders endpoints
  - [ ] Payments endpoints
  - [ ] Admin endpoints

#### 7.2 Postman/Insomnia
- [ ] **Collection Created**
- [ ] **Environment Variables**
- [ ] **Example Requests**
- [ ] **Tests/Scripts**

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
project-root/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ci.yml           # CI pipeline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deploy.yml       # Deploy pipeline
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.yml     # Security scan
‚îÇ   ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bug_report.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature_request.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task.md
‚îÇ   ‚îú‚îÄ‚îÄ PULL_REQUEST_TEMPLATE.md
‚îÇ   ‚îî‚îÄ‚îÄ CODEOWNERS
‚îú‚îÄ‚îÄ .husky/
‚îÇ   ‚îú‚îÄ‚îÄ pre-commit
‚îÇ   ‚îî‚îÄ‚îÄ commit-msg
‚îú‚îÄ‚îÄ .vscode/
‚îÇ   ‚îú‚îÄ‚îÄ settings.json
‚îÇ   ‚îú‚îÄ‚îÄ extensions.json
‚îÇ   ‚îî‚îÄ‚îÄ launch.json
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md
‚îÇ   ‚îú‚îÄ‚îÄ API_DESIGN.md
‚îÇ   ‚îú‚îÄ‚îÄ DATABASE_SCHEMA.md
‚îÇ   ‚îú‚îÄ‚îÄ SECURITY.md
‚îÇ   ‚îú‚îÄ‚îÄ DEVELOPMENT.md
‚îÇ   ‚îî‚îÄ‚îÄ DEPLOYMENT.md
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .eslintrc.js
‚îú‚îÄ‚îÄ .prettierrc
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ commitlint.config.js
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ docker-compose.dev.yml
‚îî‚îÄ‚îÄ README.md
```

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

### P0-001: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Repository

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ Critical  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Tech Lead  
**–°—Ä–æ–∫:** Day 1

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å branch protection –¥–ª—è `main`
  - Require PR reviews (min 1)
  - Require status checks
  - Require linear history
- [ ] –î–æ–±–∞–≤–∏—Ç—å CODEOWNERS —Ñ–∞–π–ª
- [ ] –°–æ–∑–¥–∞—Ç—å issue templates
- [ ] –°–æ–∑–¥–∞—Ç—å PR template
- [ ] –î–æ–±–∞–≤–∏—Ç—å README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

---

### P0-002: CI/CD Pipeline

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ Critical  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** DevOps/Tech Lead  
**–°—Ä–æ–∫:** Day 1-2

**GitHub Actions Workflow:**

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      - run: npm ci
      - run: npm run lint

  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      - run: npm ci
      - run: npm test

  build:
    runs-on: ubuntu-latest
    needs: [lint, test]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      - run: npm ci
      - run: npm run build
```

---

### P0-003: Docker Setup

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ Critical  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** DevOps/Backend  
**–°—Ä–æ–∫:** Day 2

**docker-compose.dev.yml:**

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    container_name: mm-postgres-dev
    ports:
      - "5432:5432"
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: memento_mori_dev
    volumes:
      - postgres_dev_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    container_name: mm-redis-dev
    ports:
      - "6379:6379"

  mailhog:
    image: mailhog/mailhog
    container_name: mm-mailhog
    ports:
      - "1025:1025"
      - "8025:8025"

volumes:
  postgres_dev_data:
```

---

### P0-004: ESLint & Prettier Configuration

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° High  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Frontend Lead  
**–°—Ä–æ–∫:** Day 2

**.eslintrc.js (shared):**

```javascript
module.exports = {
  parser: '@typescript-eslint/parser',
  parserOptions: {
    project: 'tsconfig.json',
    tsconfigRootDir: __dirname,
    sourceType: 'module',
  },
  plugins: ['@typescript-eslint/eslint-plugin'],
  extends: [
    'plugin:@typescript-eslint/recommended',
    'plugin:prettier/recommended',
  ],
  root: true,
  env: {
    node: true,
    jest: true,
  },
  ignorePatterns: ['.eslintrc.js'],
  rules: {
    '@typescript-eslint/interface-name-prefix': 'off',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'warn',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
  },
};
```

**.prettierrc:**

```json
{
  "singleQuote": true,
  "trailingComma": "all",
  "tabWidth": 2,
  "semi": true,
  "printWidth": 100
}
```

---

### P0-005: Husky & Commitlint Setup

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° High  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Tech Lead  
**–°—Ä–æ–∫:** Day 2

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**

```bash
npm install -D husky lint-staged @commitlint/cli @commitlint/config-conventional
npx husky init
```

**commitlint.config.js:**

```javascript
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',     // New feature
        'fix',      // Bug fix
        'docs',     // Documentation
        'style',    // Formatting
        'refactor', // Refactoring
        'test',     // Tests
        'chore',    // Maintenance
        'ci',       // CI/CD
        'perf',     // Performance
        'revert',   // Revert
      ],
    ],
    'subject-case': [2, 'always', 'lower-case'],
    'subject-max-length': [2, 'always', 72],
  },
};
```

**.husky/pre-commit:**

```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx lint-staged
```

**.husky/commit-msg:**

```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx --no -- commitlint --edit ${1}
```

---

### P0-006: Environment Variables

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ Critical  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Tech Lead  
**–°—Ä–æ–∫:** Day 1

**.env.example:**

```env
# App
NODE_ENV=development
PORT=3001

# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/memento_mori_dev?schema=public

# JWT
JWT_SECRET=your-super-secret-key-minimum-32-characters
JWT_EXPIRATION=24h

# Stripe
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxx

# Email
MAILGUN_API_KEY=xxx
MAILGUN_DOMAIN=sandbox.mailgun.org
EMAIL_FROM=noreply@mementomori.ru

# Frontend URLs
CLIENT_URL=http://localhost:3000
VENDOR_URL=http://localhost:3002
ADMIN_URL=http://localhost:3003

# Redis (optional)
REDIS_URL=redis://localhost:6379
```

---

### P0-007: Database Schema

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ Critical  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Backend Lead  
**–°—Ä–æ–∫:** Day 3

**prisma/schema.prisma:**

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User & Auth
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  firstName String?
  lastName  String?
  role      Role     @default(CLIENT)
  isBlocked Boolean  @default(false)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  vendorProfile VendorProfile?
  orders        Order[]        @relation("ClientOrders")
}

enum Role {
  CLIENT
  VENDOR
  ADMIN
}

// Vendor
model VendorProfile {
  id            String       @id @default(uuid())
  userId        String       @unique
  user          User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  businessName  String
  description   String?
  contactEmail  String?
  contactPhone  String
  address       String
  postalCode    String
  
  status          VendorStatus @default(PENDING)
  rejectionReason String?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  services Service[]
}

enum VendorStatus {
  PENDING
  APPROVED
  REJECTED
  SUSPENDED
}

// Service
model Service {
  id          String        @id @default(uuid())
  vendorId    String
  vendor      VendorProfile @relation(fields: [vendorId], references: [id])
  categoryId  String?
  category    Category?     @relation(fields: [categoryId], references: [id])
  
  name        String
  description String
  price       Decimal       @db.Decimal(10, 2)
  images      String[]
  
  status ServiceStatus @default(ACTIVE)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  orders Order[]
  
  @@index([vendorId])
  @@index([categoryId])
  @@index([status])
}

enum ServiceStatus {
  ACTIVE
  INACTIVE
  PENDING_REVIEW
  DELETED
}

// Category
model Category {
  id          String    @id @default(uuid())
  name        String    @unique
  description String?
  icon        String?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  services Service[]
}

// Order
model Order {
  id         String      @id @default(uuid())
  clientId   String
  client     User        @relation("ClientOrders", fields: [clientId], references: [id])
  serviceId  String
  service    Service     @relation(fields: [serviceId], references: [id])
  
  quantity   Int         @default(1)
  totalPrice Decimal     @db.Decimal(10, 2)
  notes      String?
  
  status OrderStatus @default(PENDING)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  payment Payment?
  
  @@index([clientId])
  @@index([serviceId])
  @@index([status])
}

enum OrderStatus {
  PENDING
  CONFIRMED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

// Payment
model Payment {
  id              String        @id @default(uuid())
  orderId         String        @unique
  order           Order         @relation(fields: [orderId], references: [id])
  
  stripePaymentId String?
  amount          Decimal       @db.Decimal(10, 2)
  currency        String        @default("rub")
  
  status PaymentStatus @default(PENDING)
  
  paidAt    DateTime?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

enum PaymentStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  REFUNDED
}
```

---

### P0-008: Swagger/OpenAPI Setup

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° High  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Backend Lead  
**–°—Ä–æ–∫:** Day 3

**main.ts (NestJS):**

```typescript
import { NestFactory } from '@nestjs/core';
import { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';
import { ValidationPipe } from '@nestjs/common';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  // Validation
  app.useGlobalPipes(new ValidationPipe({
    whitelist: true,
    transform: true,
  }));
  
  // CORS
  app.enableCors({
    origin: [
      process.env.CLIENT_URL,
      process.env.VENDOR_URL,
      process.env.ADMIN_URL,
    ],
    credentials: true,
  });
  
  // Swagger
  const config = new DocumentBuilder()
    .setTitle('Memento Mori API')
    .setDescription('API documentation for Memento Mori platform')
    .setVersion('1.0')
    .addBearerAuth()
    .addTag('auth', 'Authentication endpoints')
    .addTag('vendors', 'Vendor management')
    .addTag('services', 'Services catalog')
    .addTag('orders', 'Orders management')
    .addTag('payments', 'Payments')
    .addTag('admin', 'Admin endpoints')
    .build();
    
  const document = SwaggerModule.createDocument(app, config);
  SwaggerModule.setup('api/docs', app, document);
  
  await app.listen(process.env.PORT || 3001);
}
bootstrap();
```

---

### P0-009: Seed Data Script

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° High  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Backend  
**–°—Ä–æ–∫:** Day 4

**prisma/seed.ts:**

```typescript
import { PrismaClient } from '@prisma/client';
import * as bcrypt from 'bcrypt';

const prisma = new PrismaClient();

async function main() {
  // Create Admin
  const adminPassword = await bcrypt.hash('admin123', 10);
  const admin = await prisma.user.upsert({
    where: { email: 'admin@mementomori.ru' },
    update: {},
    create: {
      email: 'admin@mementomori.ru',
      password: adminPassword,
      firstName: 'Admin',
      lastName: 'User',
      role: 'ADMIN',
    },
  });
  console.log('Admin created:', admin.email);

  // Create Categories
  const categories = await Promise.all([
    prisma.category.upsert({
      where: { name: '–†–∏—Ç—É–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏' },
      update: {},
      create: { name: '–†–∏—Ç—É–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏', description: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Ö–æ—Ä–æ–Ω', icon: 'funeral' },
    }),
    prisma.category.upsert({
      where: { name: '–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏' },
      update: {},
      create: { name: '–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏', description: '–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤', icon: 'legal' },
    }),
    prisma.category.upsert({
      where: { name: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç' },
      update: {},
      create: { name: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', description: '–ö–∞—Ç–∞—Ñ–∞–ª–∫ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏', icon: 'transport' },
    }),
  ]);
  console.log('Categories created:', categories.length);

  // Create Test Vendor
  const vendorPassword = await bcrypt.hash('vendor123', 10);
  const vendorUser = await prisma.user.upsert({
    where: { email: 'vendor@test.com' },
    update: {},
    create: {
      email: 'vendor@test.com',
      password: vendorPassword,
      firstName: '–¢–µ—Å—Ç–æ–≤—ã–π',
      lastName: '–ü–æ—Å—Ç–∞–≤—â–∏–∫',
      role: 'VENDOR',
    },
  });
  
  const vendorProfile = await prisma.vendorProfile.upsert({
    where: { userId: vendorUser.id },
    update: {},
    create: {
      userId: vendorUser.id,
      businessName: '–¢–µ—Å—Ç–æ–≤—ã–µ –†–∏—Ç—É–∞–ª—å–Ω—ã–µ –£—Å–ª—É–≥–∏',
      contactPhone: '+7 999 123-45-67',
      address: '–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–µ—Å—Ç–æ–≤–∞—è, –¥. 1',
      postalCode: '123456',
      status: 'APPROVED',
    },
  });
  console.log('Vendor created:', vendorUser.email);

  // Create Test Services
  const services = await Promise.all([
    prisma.service.create({
      data: {
        vendorId: vendorProfile.id,
        categoryId: categories[0].id,
        name: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Ö–æ—Ä–æ–Ω –ø–æ–¥ –∫–ª—é—á',
        description: '–ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å —Ä–∏—Ç—É–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥',
        price: 45000,
        images: [],
      },
    }),
    prisma.service.create({
      data: {
        vendorId: vendorProfile.id,
        categoryId: categories[1].id,
        name: '–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤',
        description: '–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ',
        price: 15000,
        images: [],
      },
    }),
  ]);
  console.log('Services created:', services.length);

  // Create Test Client
  const clientPassword = await bcrypt.hash('client123', 10);
  const client = await prisma.user.upsert({
    where: { email: 'client@test.com' },
    update: {},
    create: {
      email: 'client@test.com',
      password: clientPassword,
      firstName: '–¢–µ—Å—Ç–æ–≤—ã–π',
      lastName: '–ö–ª–∏–µ–Ω—Ç',
      role: 'CLIENT',
    },
  });
  console.log('Client created:', client.email);

  console.log('‚úÖ Seed completed!');
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
```

---

### P0-010: External Services Setup

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° High  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Tech Lead  
**–°—Ä–æ–∫:** Day 4-5

#### Stripe Setup
- [ ] –°–æ–∑–¥–∞—Ç—å Stripe –∞–∫–∫–∞—É–Ω—Ç
- [ ] –ü–æ–ª—É—á–∏—Ç—å test keys
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook endpoint
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ Products/Prices

#### Email Setup
- [ ] –°–æ–∑–¥–∞—Ç—å Mailgun/SendGrid –∞–∫–∫–∞—É–Ω—Ç
- [ ] –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω
- [ ] –°–æ–∑–¥–∞—Ç—å API key
- [ ] –°–æ–∑–¥–∞—Ç—å email templates

#### Hosting Setup
- [ ] Vercel –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è frontend
- [ ] Railway/Render –¥–ª—è backend
- [ ] PostgreSQL database (Supabase/Railway)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å custom domains

---

## üìÖ Timeline

| –î–µ–Ω—å | –ó–∞–¥–∞—á–∏ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π |
|:----:|--------|---------------|
| 1 | P0-001, P0-006 | Tech Lead |
| 2 | P0-002, P0-003, P0-004, P0-005 | DevOps, Frontend |
| 3 | P0-007, P0-008 | Backend |
| 4 | P0-009, P0-010 (start) | Backend, Tech Lead |
| 5 | P0-010 (finish), Testing | All |

---

## ‚úÖ Definition of Done –¥–ª—è Phase 0

Phase 0 —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –∫–æ–≥–¥–∞:

- [ ] –í—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] `docker-compose up` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] CI pipeline –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è seed –¥–∞–Ω–Ω—ã–º–∏
- [ ] –í—Å–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (Stripe test mode, Email)
- [ ] README —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
- [ ] –ü–µ—Ä–≤—ã–π —Å–ø—Ä–∏–Ω—Ç —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω

---

## üö¶ –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á

| ID | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|----|--------|:------:|
| P0-001 | GitHub Repository Setup | ‚¨ú |
| P0-002 | CI/CD Pipeline | ‚¨ú |
| P0-003 | Docker Setup | ‚¨ú |
| P0-004 | ESLint & Prettier | ‚¨ú |
| P0-005 | Husky & Commitlint | ‚¨ú |
| P0-006 | Environment Variables | ‚¨ú |
| P0-007 | Database Schema | ‚¨ú |
| P0-008 | Swagger Setup | ‚¨ú |
| P0-009 | Seed Data | ‚¨ú |
| P0-010 | External Services | ‚¨ú |

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-01

